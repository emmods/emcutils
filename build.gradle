plugins {
  id "architectury-plugin" version "3.4-SNAPSHOT"
  id "dev.architectury.loom" version "0.10.0-SNAPSHOT" apply false
  id "com.modrinth.minotaur" version "1.2.+"
  id "org.cadixdev.licenser" version "0.6.+"
  id "io.github.juuxel.loom-quiltflower-mini" version "1.+" apply false
}

String release_title = null
String changeLog = null

architectury {
  minecraft = rootProject.mc_version
}

subprojects {
  apply plugin: "dev.architectury.loom"
  apply plugin: "io.github.juuxel.loom-quiltflower-mini"

  dependencies {
    minecraft "com.mojang:minecraft:${rootProject.mc_version}"
    mappings "net.fabricmc:yarn:${rootProject.mc_version}+build.${rootProject.yarn_mappings}:v2"

    implementation annotationProcessor("org.projectlombok:lombok:${rootProject.lombok_version}")
  }
}

allprojects {
  apply plugin: "java"
  apply plugin: "architectury-plugin"
  apply plugin: "maven-publish"

  archivesBaseName = "emcutils"
  version = rootProject.mc_version + "-" + mod_version + System.getenv().SNAPSHOT

  repositories {
    maven {
      url "https://maven.terraformersmc.com"
      content { includeGroup "com.terraformersmc" }
    }
    maven {
      url "https://maven.waffle.coffee/releases"
      content {
        includeGroup "com.mamiyaotaru"
        includeGroup "xaero"
      }
    }
  }

  // Comment this line out if you have good internet
  idea { module { downloadJavadoc = false } }

  tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
    options.release = 16
  }

  java {
    withSourcesJar()
  }
}